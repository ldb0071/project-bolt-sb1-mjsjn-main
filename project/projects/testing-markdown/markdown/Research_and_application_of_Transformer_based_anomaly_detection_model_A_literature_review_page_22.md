Page 22

L hardDistill global = 1 2 L CE ( ψ ( Z s ) , y ) + 1 2 L CE ( ψ ( Z s ) , y t ) (9)

Where y t = argmax c Z t ( c ). Z s and Z t are the outputs of the student model and teacher model respectively, KL stands for KL divergence, ψ is softmax function, λ and τ are hyperparameters, and CE denotes cross entropy.

Hence, it can be deduced that in the case of soft distillation, the output Z s of the student network is compared with the true label using the CE Loss function to obtain the intermediate result O 1 . This result is then further compared with the softmax output O 2 of the teacher network using the KL Loss function, resulting in the final calculated output O 3 with an additional weight averaging operation. On the other hand, in the case of hard distillation, the output Z s of the student network is compared with the true label using the CE Loss function to obtain the intermediate result O 1 . Subsequently, Z s is compared with the output of the teacher network using the same CE Loss function, yielding the intermediate result O 2 . Finally, an average operation is performed on these intermediate results to obtain the final output O 3 .

Since DeiT adds an extra distillation token compared to ViT, the objective function of its output is exactly the soft distillation loss function or hard distillation loss function mentioned above, Therefore, DeiT adds the output vector of the class token and the output vector of the distillation token through the linear layer to obtain the final prediction result after softmax addition during the test.

OODformer [37] uses a stronger data enhancement method with the ImageNet-21K dataset to pre-train DeiT, and uses embedding similarity methods to judge outliers. The authors concluded that under ideal circumstances, the representational similarity of OOD samples is much lower than that of ID samples, and their softmax confidence should be significantly lower than that of ID samples. Finally, the author used two methods to judge OOD samples, which are the distance measure of potential spatial embedding and the softmax confidence score. However, this paper also pointed out that the application of DeiT in OOD detection tasks is still in its infancy and there is no universal framework. The experiment in this paper is only an early attempt at ViT and DeiT models for the OOD detection task, which needs to be further studied and explored.