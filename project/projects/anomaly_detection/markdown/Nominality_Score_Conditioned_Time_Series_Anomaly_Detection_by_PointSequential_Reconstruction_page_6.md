## 3.2 Nominal Time Series and Two-stage Deviation

We denote the observed data as X 0 = { x 0 1 , ..., x 0 T } , where x 0 t ∈ R D . Assume that for each X 0 , there exists a corresponding underlying nominal time series data X ∗ = { x ∗ 1 , ..., x ∗ T } that comes from a nominal time-dependent process x ∗ t = f ∗ ( t ) : N → R D . The corresponding total deviation at t ( ∆ x 0 t ) is defined as ∆ x 0 t ≜ x 0 t -x ∗ t . We denote X ∗ as the set of all possible x ∗ t for all t ∈ { 1 , ..., T } . ∆ x 0 t can be separated into two additive factors ∆ x c t and ∆ x p t , such that, by definition, x c t = x ∗ t +∆ x c t and x 0 t = x c t +∆ x p t . We define ∆ x c t as the in-distribution deviation , where x c t ∈ X ∗ ; and ∆ x p t as the out-of-distribution deviation , which is non-zero if and only if x 0 t / ∈ X ∗ . ∆ x p t can be a means for quantifying the point anomaly, and ∆ x c t can be a means for quantifying the contextual anomaly. This is reasonable, since no matter how large ∆ x c t is, we still have x c t ∈ X ∗ , i.e., the in-distribution deviated value x c t is still in the set of all possible nominal time point data, and cannot be detected using a point-based model. On the other hand, it is possible that having learned X ∗ , a point-based model can negate the deviated value caused by ∆ x p t . Fig. 1(a) gives an illustration of the relationships between the variables at time t . We clarify this using the example below.

Assume we obtain a dataset from the streaming data of a 2D position sensor, where x ∗ t , x c t , x 0 t ∈ R 2 , and we have learned that the nominal time series is the circular movement of a point around the origin with some angular velocity ω and radius r , where R min ≤ r ≤ R max . Accordingly, we can deduce that X ∗ = { [ x y ] T | R 2 min ≤ x 2 + y 2 ≤ R 2 max } and x ∗ t = [ r cos ωt r sin ωt ] T . One possible cause (among many others) of contextual anomalies might be due to an unexpected change in angular velocity. For instance, failures in the system might lead to a slowdown of the circular movement between t 1 and t 2 , i.e., ∆ x c t = [ r (cos ω ' t -cos ωt ) r (sin ω ' t -sin ωt )] T for t ∈ { t 1 , ..., t 2 } and ∆ x c t = 0 elsewhere. Moreover, noisy measurements of individual time points may induce point anomalies in the observed time series, i.e., ∆ x p t = [ w x,t w y,t ] T where w x,t or w y,t is nonzero such that x 0 t / ∈ X ∗ for some t . Fig. 1(b)(c) gives an illustration of the above example. The black dots are time points where x 0 t = x ∗ t (no anomalies). The blue dots are time points exhibiting a slowdown (contextual anomalies). The red dots are time points with noisy measurements (point anomalies). The purple dots are time points with both slowdown and noisy measurements (point and contextual anomalies). The green dots are time points with noisy measurements but x 0 t ∈ X ∗ , so are still contextual anomalies since their deviations cannot be detected by observing a single time point.